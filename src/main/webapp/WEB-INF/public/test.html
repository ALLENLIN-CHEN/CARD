<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
    <title>社保大数据业务平台</title>

    <link rel="stylesheet" href="css/bootstrap.css">
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->

    <link rel="stylesheet" href="css/layout.css" type="text/css" media="screen" />
    <!--[if lt IE 9]>
    <link rel="stylesheet" href="css/ie.css" type="text/css" media="screen" />
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
<!--     <script src="js/jquery-1.5.2.min.js" type="text/javascript"></script> -->
	<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script src="js/hideshow.js" type="text/javascript"></script>
    <script src="js/jquery.tablesorter.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jquery.equalHeight.js"></script>
    </script>

<!--     <script type="text/javascript" src="http://cdn.hcharts.cn/jquery/jquery-1.8.3.min.js"></script> -->
    <script type="text/javascript" src="http://cdn.hcharts.cn/highcharts/highcharts.js"></script>
<!--     <script type="text/javascript" src="http://cdn.hcharts.cn/highcharts/exporting.js"></script> -->
    <script type="text/javascript" src="js/analysis0.js"></script>
    <script type="text/javascript" src="js/analysis1.js"></script>
    <script type="text/javascript" src="js/analysis2.js"></script>
    <script type="text/javascript" src="js/analysis3.js"></script>
    <script type="text/javascript" src="js/analysis4.js"></script>
    <script type="text/javascript" src="js/analysis5.js"></script>
    <script type="text/javascript" src="js/analysis6.js"></script>
    <script type="text/javascript" src="js/analysis7.js"></script>
    <script type="text/javascript" src="js/analysis8.js"></script>
</head>
<body>
	<div class="navbar navbar-fixed-top navbar-inverse" >
	    <div class="container">
	        <a id="logo" href="/">社保大数据业务平台</a>
	        <nav>
	            <ul class="nav navbar-nav pull-right">
	                <li><a href="https://rubytutorial-jungieve.c9users.io/">主页</a></li>
	                <li><a href="https://rubytutorial-jungieve.c9users.io/help">帮助</a></li>
	                <li><a href="http://125.216.242.244:8080/ETL/html/index.html">预处理</a></li>
	                <li><a href="http://125.216.242.244:8080/olap/">OLAP分析</a></li>
	                <li><a href="http://125.216.242.244:8080/openreports/">报表展示</a></li>
	                <li><a href="http://125.216.242.244:8080/highChart">业务样例</a></li>
	                <li><a href="https://rubytutorial-jungieve.c9users.io/users">其他成员</a></li>
	                <li class="dropdown">
	                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">账户</a>
	                </li>
	            </ul>
	        </nav>
	    </div>
	</div>
	<h1>失业保险覆盖率</h1>
	<div id="main" style="height:400px"></div>
	
	<script src="js/echarts.js"></script>
	
	<script type="text/javascript">
		$(function() {
			$(".tablesorter").tablesorter();
			
			//When page loads...
            $(".tab_content").hide(); //Hide all content
            $("ul.tabs li:first").addClass("active").show(); //Activate first tab
            $(".tab_content:first").show(); //Show first tab content

            //On Click Event
            $("ul.tabs li").click(function() {

                $("ul.tabs li").removeClass("active ");//Remove any "active" class
                $(this).addClass("active"); //Add "active" class to selected tab
                $(".tab_content").hide(); //Hide all tab content

                var activeTab = $(this).find("a").attr("href"); //Find the href attribute value to identify the active tab + content
                $(activeTab).fadeIn(); //Fade in the active ID content
                return false;
            });
                
            $('.column').equalHeight();
		});
	
		// 路径配置
	    require.config({
	        paths: {
	            echarts: 'http://echarts.baidu.com/build/dist',
	        }
	    });
		
		require([
		         'echarts',
		         'echarts/chart/gauge'
		        ], 
			function(ec) {
				var myChart = ec.init(document.getElementById('main'));
				
				var option = {
						tooltip : {
					        formatter: "{a} <br/>{b} : {c}%"
					    },
					    toolbox: {
					        show : false,
					        feature : {
					            mark : {show: true},
					            restore : {show: true},
					            saveAsImage : {show: true}
					        }
					    },
					    series : [
					        {
					            name:'失业保险覆盖率',
					            type:'gauge',
					            detail : {formatter:'{value}%'},
					            data:[{value: 0, name: '覆盖率'}]
					        }
					    ]
				};
				
				var timer = null, index = 1;
				
				$.ajax({
					type: 'GET',
					async: false,
					dataType: 'json',
					url: '/mychart/charts/chart07',
					success: function(res) {
						var data = res.test;
						option.series[0].data[0] = {value: data[0].total, name: data[0].year+"覆盖率"};
						
						myChart.setOption(option);
						
						timer = setInterval(function() {
							if(index >= data.length) {
								index = 0;
							}
							option.series[0].data[0] = {value: data[index].total, name: data[index].year+"覆盖率"};
							index++;
							myChart.setOption(option, true);
						}, 2000);
					},
					error: function(data) {
						
					}
				});
			}
		);
	</script>
</body>

</html>